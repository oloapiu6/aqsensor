(this.webpackJsonpaqsensor=this.webpackJsonpaqsensor||[]).push([[0],{131:function(e,t,n){},183:function(e,t,n){"use strict";n.r(t);var c=n(7),s=n(0),r=n.n(s),a=n(27),o=n.n(a),i=(n(131),n(64)),l=n(65),d=n(81),u=n(79),h=(n(89),n(132),n(187)),b=n(188),j=n(189),m=n(190),p=n(196),v=function(e){for(var t=[[0,12],[12.1,35.4],[35.5,55.4],[55.5,150.4],[150.5,250.4],[250.5,350.4],[350.5,500.4]],n=[[0,50],[51,100],[101,150],[151,200],[201,300],[301,400],[401,500]],c=Math.round(10*e)/10,s=t[t.length-1][0],r=t[t.length-1][1],a=n[n.length-1][0],o=n[n.length-1][1],i=0,l=0,d=t;l<d.length;l++){var u=d[l];if(c>=u[0]&c<=u[1]){s=u[0],r=u[1],a=n[i][0],o=n[i][1];break}i+=1}var h=(o-a)/(r-s)*(c-s)+a,b=["#52c41a","#fadb14","#fa8c16","#f5222d","#722ed1","#613400","#613400","#613400"][i];return[Math.round(h),b]},f=n(33);function O(e){var t=e.selectedSensor,n=Object(h.a)();if(t){var s=[t.device.location.coordinates[1],t.device.location.coordinates[0]],r=t.device.name,a=v(t.characteristics.pm2_5ConcMass.value)[1],o=v(t.characteristics.pm2_5ConcMass.value)[0],i=Math.round(t.characteristics.pm2_5ConcMass.value),l="\n      background-color: ".concat(a,";\n      width: 2rem;\n      height: 2rem;\n      display: block;\n      left: -1rem;\n      top: -1rem;\n      position: relative;\n      border-radius: 2rem 2rem 0;\n      transform: rotate(45deg);\n      border: 1px solid #FFFFFF"),d=Object(f.divIcon)({className:"my-custom-pin",iconAnchor:[0,24],labelAnchor:[-6,0],popupAnchor:[0,-36],html:'<span style="'.concat(l,'" />')});return n.setView(s,10),n.panTo(s),Object(c.jsx)(b.a,{position:s,icon:d,children:Object(c.jsx)(j.a,{direction:"bottom",permanent:!0,children:Object(c.jsxs)("div",{className:"tc",children:[Object(c.jsx)("h1",{className:"pv0 ph5",style:{color:"#275476"},children:r}),Object(c.jsx)("div",{className:"pv0",children:Object(c.jsxs)("p",{className:"f5 b",children:["AQI: ",o]})}),Object(c.jsxs)("div",{children:["PM2.5 Concentration: ",i," \xb5g/m",Object(c.jsx)("sup",{children:"3"})]})]})})})}return null}var x=function(e){return Object(c.jsxs)(m.a,{style:{height:"350px"},center:[45,0],zoom:2,children:[Object(c.jsx)(p.a,{tileLayer:"cartodbpositron",attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors, Map tiles by Carto.',url:"https://cartodb-basemaps-{s}.global.ssl.fastly.net/light_all/{z}/{x}/{y}.png"}),Object(c.jsx)(O,{selectedSensor:e.selectedSensor})]})},S=n(101),g=n(87),C=n.n(g),M=n(102),N=n(191),y=n(103),w=n.n(y),k=n(193),F=n(121),_=n(195),I=n(192),A=k.a.Search,z=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(){var e;return Object(i.a)(this,n),(e=t.call(this)).getData=Object(M.a)(C.a.mark((function t(){var n,c,s;return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://d149wkud6tbfrz.cloudfront.net/api/measurements/current");case 2:return n=t.sent,t.next=5,n.json();case 5:return c=t.sent,t.next=8,c.sort((function(e,t){return t.characteristics.pm2_5ConcMass.value-e.characteristics.pm2_5ConcMass.value}));case 8:return t.next=10,c.map((function(e,t){return e.rank=t+1,e}));case 10:s=t.sent,e.setState({sensors:s}),e.props.onSensorSelect(e.state.sensors[0]);case 13:case"end":return t.stop()}}),t)}))),e.onSearch=function(t){e.setState({searchField:t}),e.setState({visualizedNumber:10})},e.onAction=function(t){var n,c=Object(S.a)(e.state.sensors);try{for(c.s();!(n=c.n()).done;){var s=n.value;if(s._id===t.target.id){e.props.onSensorSelect(s);break}}}catch(r){c.e(r)}finally{c.f()}},e.onSeeMore=function(t){e.setState({visualizedNumber:e.state.visualizedNumber+10}),console.log(e.state.visualizedNumber)},e.state={sensors:[],searchField:"",visualizedNumber:10},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.getData()}},{key:"render",value:function(){var e=this,t=this.state,n=t.searchField,s=t.sensors,r=t.visualizedNumber,a=s.filter((function(e){return e.device.name.toLowerCase().includes(n.toLowerCase())})).slice(0,r);return Object(c.jsx)("div",{children:Object(c.jsx)(N.b,{header:Object(c.jsx)("div",{children:Object(c.jsx)(A,{placeholder:"input search text",allowClear:!0,onSearch:this.onSearch,enterButton:!0})}),footer:Object(c.jsx)("div",{className:"tc",children:Object(c.jsx)(F.a,{onClick:this.onSeeMore,children:"See More"})}),bordered:!0,dataSource:a,renderItem:function(t){return Object(c.jsxs)(N.b.Item,{id:t._id,actions:[Object(c.jsx)("a",{id:t._id,onClick:e.onAction,children:"Show on map"},"show-on-map")],children:[Object(c.jsx)(N.b.Item.Meta,{title:t.device.name,description:Object(c.jsx)(w.a,{date:t.time}),avatar:Object(c.jsxs)(I.a,{style:{backgroundColor:"#595959"},children:["#",t.rank]})}),Object(c.jsxs)("div",{children:[Math.round(t.characteristics.pm2_5ConcMass.value)," \xb5g/m",Object(c.jsx)("sup",{children:"3"})," ",Object(c.jsxs)(_.a,{color:v(t.characteristics.pm2_5ConcMass.value)[1],children:[v(t.characteristics.pm2_5ConcMass.value)[0]," AQI"]})]})]})}})})}}]),n}(r.a.Component),L=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(){var e;return Object(i.a)(this,n),(e=t.call(this)).onSensorSelect=function(t){e.setState({selectedSensor:t})},e.state={selectedSensor:null},e}return Object(l.a)(n,[{key:"render",value:function(){return Object(c.jsxs)("div",{className:"pt4 pb0",style:{backgroundColor:"#F1F9FF"},children:[Object(c.jsxs)("div",{className:"mw7 center tc mb2",children:[Object(c.jsx)("h1",{className:"f1 tc",style:{color:"#275476"},children:"AIR QUALITY RANKING"}),Object(c.jsx)("p",{className:"f4 tc",children:"Places with high particulate matter (PM2.5) pollution"})]}),Object(c.jsx)("div",{className:"mw7 center",children:Object(c.jsx)(x,{selectedSensor:this.state.selectedSensor})}),Object(c.jsx)("div",{className:"mw7 center pt2 pb4",children:Object(c.jsx)("div",{className:"bg-white br3",children:Object(c.jsx)(z,{onSensorSelect:this.onSensorSelect,className:"mw7"})})})]})}}]),n}(r.a.Component),P=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,197)).then((function(t){var n=t.getCLS,c=t.getFID,s=t.getFCP,r=t.getLCP,a=t.getTTFB;n(e),c(e),s(e),r(e),a(e)}))};n(182);o.a.render(Object(c.jsx)(r.a.StrictMode,{children:Object(c.jsx)(L,{})}),document.getElementById("root")),P()},89:function(e,t,n){}},[[183,1,2]]]);
//# sourceMappingURL=main.492a7674.chunk.js.map