(this.webpackJsonpaqsensor=this.webpackJsonpaqsensor||[]).push([[0],{131:function(e,t,n){},132:function(e,t,n){},185:function(e,t,n){"use strict";n.r(t);var c=n(7),s=n(0),a=n.n(s),r=n(27),o=n.n(r),i=(n(131),n(64)),l=n(65),u=n(81),d=n(79),h=(n(132),n(133),n(187)),b=n(188),j=n(189),m=n(190),v=n(195);function f(e){var t=e.selectedSensor,n=Object(h.a)();if(t){var s=[t.device.location.coordinates[1],t.device.location.coordinates[0]],a=t.device.name;return n.setView(s,10),n.panTo(s),Object(c.jsx)(b.a,{position:s,children:Object(c.jsx)(j.a,{children:a})})}return null}var p=function(e){return Object(c.jsxs)(m.a,{style:{height:"300px"},center:[45,0],zoom:2,children:[Object(c.jsx)(v.a,{tileLayer:"cartodbpositron",attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors, Map tiles by Carto.',url:"https://cartodb-basemaps-{s}.global.ssl.fastly.net/light_all/{z}/{x}/{y}.png"}),Object(c.jsx)(f,{selectedSensor:e.selectedSensor})]})},O=n(101),x=n(88),S=n.n(x),g=n(102),C=n(191),M=n(86),w=n.n(M),N=n(193),y=n(120),k=n(196),I=n(192),F=N.a.Search,z=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;return Object(i.a)(this,n),(e=t.call(this)).getData=Object(g.a)(S.a.mark((function t(){var n,c;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://d149wkud6tbfrz.cloudfront.net/api/measurements/current");case 2:return n=t.sent,t.next=5,n.json();case 5:return c=t.sent,t.next=8,c.sort((function(e,t){return t.characteristics.pm2_5ConcMass.value-e.characteristics.pm2_5ConcMass.value}));case 8:e.setState({sensors:c}),e.props.onSensorSelect(e.state.sensors[0]);case 10:case"end":return t.stop()}}),t)}))),e.onSearch=function(t){e.setState({searchField:t}),e.setState({visualizedNumber:10})},e.onAction=function(t){console.log(t.target.id);var n,c=Object(O.a)(e.state.sensors);try{for(c.s();!(n=c.n()).done;){var s=n.value;if(s._id===t.target.id){e.props.onSensorSelect(s);break}}}catch(a){c.e(a)}finally{c.f()}},e.onSeeMore=function(t){e.setState({visualizedNumber:e.state.visualizedNumber+10}),console.log(e.state.visualizedNumber)},e.calculatePm25AQI=function(e){for(var t=[[0,12],[12.1,35.4],[35.5,55.4],[55.5,150.4],[150.5,250.4],[250.5,350.4],[350.5,500.4]],n=[[0,50],[51,100],[101,150],[151,200],[201,300],[301,400],[401,500]],c=Math.round(10*e)/10,s=t[t.length-1][0],a=t[t.length-1][1],r=n[n.length-1][0],o=n[n.length-1][1],i=0,l=0,u=t;l<u.length;l++){var d=u[l];if(c>=d[0]&c<=d[1]){s=d[0],a=d[1],r=n[i][0],o=n[i][1];break}i+=1}var h=(o-r)/(a-s)*(c-s)+r,b=["#52c41a","#fadb14","#fa8c16","#f5222d","#722ed1","#613400"][i];return[Math.round(h),b]},e.state={sensors:[],searchField:"",visualizedNumber:10},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.getData()}},{key:"render",value:function(){var e=this,t=this.state,n=t.searchField,s=t.sensors,a=t.visualizedNumber,r=s.filter((function(e){return e.device.name.toLowerCase().includes(n.toLowerCase())})).slice(0,a);return Object(c.jsx)("div",{children:Object(c.jsx)(C.b,{header:Object(c.jsx)("div",{children:Object(c.jsx)(F,{placeholder:"input search text",allowClear:!0,onSearch:this.onSearch,enterButton:!0})}),footer:Object(c.jsx)("div",{className:"tc",children:Object(c.jsx)(y.a,{onClick:this.onSeeMore,children:"See More"})}),bordered:!0,dataSource:r,renderItem:function(t,n){return Object(c.jsxs)(C.b.Item,{id:t._id,actions:[Object(c.jsx)("a",{id:t._id,onClick:e.onAction,children:"Show on map"},"show-on-map")],children:[Object(c.jsx)(C.b.Item.Meta,{title:t.device.name,description:Object(c.jsx)(w.a,{date:t.time}),avatar:Object(c.jsxs)(I.a,{style:{backgroundColor:"#595959"},children:["#",n]})}),Object(c.jsxs)("div",{children:[Math.round(t.characteristics.pm2_5ConcMass.value)," \xb5g/m3 ",Object(c.jsxs)(k.a,{color:e.calculatePm25AQI(t.characteristics.pm2_5ConcMass.value)[1],children:[e.calculatePm25AQI(t.characteristics.pm2_5ConcMass.value)[0]," AQI"]})]})]})}})})}}]),n}(a.a.Component),A=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;return Object(i.a)(this,n),(e=t.call(this)).onSensorSelect=function(t){e.setState({selectedSensor:t})},e.state={selectedSensor:null},e}return Object(l.a)(n,[{key:"render",value:function(){return Object(c.jsxs)("div",{style:{backgroundColor:"#F1F9FF"},children:[Object(c.jsx)("h1",{className:"f2 tc ma0 pt4 pb2",children:"AIR QUALITY RANKING"}),Object(c.jsx)("h2",{className:"f3 tc ma0 pb4",children:"Places with high particulate matter (PM2.5) pollution"}),Object(c.jsx)("div",{className:"mw7 center",children:Object(c.jsx)(p,{selectedSensor:this.state.selectedSensor})}),Object(c.jsx)("div",{className:"mw7 center pv4",children:Object(c.jsx)("div",{className:"bg-white br3",children:Object(c.jsx)(z,{onSensorSelect:this.onSensorSelect,className:"mw7"})})})]})}}]),n}(a.a.Component),_=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,197)).then((function(t){var n=t.getCLS,c=t.getFID,s=t.getFCP,a=t.getLCP,r=t.getTTFB;n(e),c(e),s(e),a(e),r(e)}))};n(183);o.a.render(Object(c.jsx)(a.a.StrictMode,{children:Object(c.jsx)(A,{})}),document.getElementById("root")),_()}},[[185,1,2]]]);
//# sourceMappingURL=main.6ea1a3c2.chunk.js.map